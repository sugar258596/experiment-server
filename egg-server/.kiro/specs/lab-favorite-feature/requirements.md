# 需求文档

## 简介

本功能旨在完善实验室预约系统中的收藏功能，使用户能够在实验室列表和详情页面中方便地收藏和取消收藏实验室，并在收藏列表中查看所有已收藏的实验室。

## 术语表

- **系统（System）**：实验室预约系统的前后端应用
- **用户（User）**：登录系统的学生或教师
- **实验室（Lab）**：可供预约的实验室资源
- **收藏（Favorite）**：用户标记感兴趣的实验室的行为
- **实验室列表页（Lab List Page）**：展示所有实验室的页面
- **实验室详情页（Lab Detail Page）**：展示单个实验室详细信息的页面
- **收藏列表页（Favorites Page）**：展示用户所有收藏实验室的页面
- **收藏状态（Favorite Status）**：标识实验室是否被当前用户收藏的布尔值

## 需求

### 需求 1：实验室列表页收藏功能

**用户故事：** 作为用户，我希望在实验室列表页面中点击收藏按钮来收藏或取消收藏实验室，以便快速标记我感兴趣的实验室。

#### 验收标准

1. WHEN 用户在实验室列表页点击实验室卡片上的收藏图标 THEN 系统应切换该实验室的收藏状态
2. WHEN 实验室被收藏 THEN 系统应将收藏图标显示为填充的红色心形
3. WHEN 实验室未被收藏 THEN 系统应将收藏图标显示为空心的白色心形
4. WHEN 用户点击收藏图标 THEN 系统应阻止事件冒泡，避免触发卡片点击事件
5. WHEN 收藏操作成功 THEN 系统应显示成功提示消息
6. WHEN 收藏操作失败 THEN 系统应显示错误提示消息并保持原有状态

### 需求 2：实验室详情页收藏功能

**用户故事：** 作为用户，我希望在实验室详情页面中看到收藏按钮并能够收藏或取消收藏该实验室，以便在查看详细信息后决定是否收藏。

#### 验收标准

1. WHEN 用户访问实验室详情页 THEN 系统应在页面顶部显示收藏按钮
2. WHEN 实验室已被收藏 THEN 系统应将收藏按钮显示为"已收藏"状态
3. WHEN 实验室未被收藏 THEN 系统应将收藏按钮显示为"收藏"状态
4. WHEN 用户点击收藏按钮 THEN 系统应切换该实验室的收藏状态
5. WHEN 收藏状态改变 THEN 系统应更新按钮的显示状态和文本

### 需求 3：后端收藏状态查询

**用户故事：** 作为系统，我需要在返回实验室列表和详情时包含当前用户的收藏状态，以便前端正确显示收藏图标。

#### 验收标准

1. WHEN 系统返回实验室列表数据 THEN 系统应为每个实验室包含isFavorite字段
2. WHEN 系统返回实验室详情数据 THEN 系统应包含isFavorite字段
3. WHEN 用户已收藏该实验室 THEN 系统应将isFavorite字段设置为true
4. WHEN 用户未收藏该实验室 THEN 系统应将isFavorite字段设置为false
5. WHEN 用户未登录 THEN 系统应将isFavorite字段设置为false

### 需求 4：收藏列表展示

**用户故事：** 作为用户，我希望在收藏列表页面中查看所有已收藏的实验室，以便快速访问我感兴趣的实验室。

#### 验收标准

1. WHEN 用户访问收藏列表页 THEN 系统应显示所有已收藏的实验室
2. WHEN 收藏列表为空 THEN 系统应显示空状态提示
3. WHEN 用户点击收藏列表中的实验室卡片 THEN 系统应导航到该实验室的详情页
4. WHEN 用户在收藏列表中取消收藏 THEN 系统应从列表中移除该实验室
5. WHEN 收藏列表数据加载中 THEN 系统应显示加载状态

### 需求 5：收藏数据一致性

**用户故事：** 作为系统，我需要确保收藏状态在不同页面间保持一致，以便用户获得统一的体验。

#### 验收标准

1. WHEN 用户在实验室列表页收藏实验室 THEN 系统应在实验室详情页和收藏列表页反映该变化
2. WHEN 用户在实验室详情页收藏实验室 THEN 系统应在实验室列表页和收藏列表页反映该变化
3. WHEN 用户在收藏列表页取消收藏 THEN 系统应在实验室列表页和详情页反映该变化
4. WHEN 收藏状态改变 THEN 系统应立即更新所有相关页面的显示状态
5. WHEN 用户刷新页面 THEN 系统应从服务器获取最新的收藏状态
